package commandinterface;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.Scanner;

import coresystem.RestaurantSystem;
import ingredients.Ingredient;
import mealsystem.Meal;
import orders.Order;
import users.ClientUser;

public class CommandConsole{
	static RestaurantSystem re1;
	static ArrayList<Order> orders;
	static HashSet<Meal> meals;
	static HashSet<Ingredient> ingredients;
	private static Scanner sc = new Scanner(System.in);
	private static CommandList cl = new CommandList();
	
	public CommandConsole(){
		re1 = new RestaurantSystem("our restaurant!");
		orders = new ArrayList<Order>();	
		meals = new HashSet<Meal>();
		ingredients = new HashSet<Ingredient>();
	}
	
	public CommandConsole(String name){
		re1 = new RestaurantSystem(name);
		orders = new ArrayList<Order>();	
		meals = new HashSet<Meal>();
		ingredients = new HashSet<Ingredient>();
	}
	
	public static void registerUser(String input) throws RuntimeException{
			String command = input.substring(11,input.length()-1);//command = library_name
			String[] data = command.split(",");
			
			if (command.equals("")){
				System.out.println("Please enter the name of the library!");
				return;
			}
			
			cl.register_user(data[0], data[1], data[2], data[3]);
	}
	
	public static void inputTreatment(String input){
		int strlength = input.length();
		String lastLetter = input.substring(strlength-1, strlength);
		if ((input.length()>=11)&&((input.substring(0,10)).equals("register<"))&&(lastLetter.equals(">"))){
		registerUser(input);
		return;
	}
		
		
	}
	
	public static void main(String[] args) throws Exception {
		String input;
		
		while (true) {
			
			System.out.println("Please enter a command line:");
			System.out.println("(If you want to stop the program, Press EXIT!)");
			input = sc.nextLine();

			re1.printUsers();
			//Stop the loop
			if (input.equalsIgnoreCase("EXIT")){
				System.out.print("Thanks for dining with us!");
				return;
			}
			
			inputTreatment(input);
			
			System.out.println("Please press ENTER to continue:");
			sc.nextLine();
			
		}
	}
}
