package enjoyyourmeal.Meals;

import java.util.HashSet;
import java.util.Set;


public class Meals {
	public String name;
	public double price;
	public double specialPrice;
	public String description = "";
	public boolean specialOffer = false;
	public Set<Ingredient> ingredients = new HashSet<Ingredient>();
	
	public Meals(String name, String description, Ingredient ...ingredients){
		this.name = name;
		for (Ingredient obj : ingredients){
			this.ingredients.add(obj);
		}
		this.description = description;
		this.price = updatePrices();
	}
	
	
	public double updatePrices(){
		int price = 0;
		for (Ingredient obj : this.ingredients){
			price += obj.getTotalprice();
		}
		return price;
	}
	
	public String getName() {
		return name;
	}


	public double getPrice() {
		if (specialOffer){
			return specialPrice;
		} else {
			return this.price;
		}
	}



	public double getSpecialPrice() {
		if (specialOffer){
			return specialPrice;
		} else {
			throw new RuntimeException("No special offers yet!");
		}
	}


	public void setSpecialPrice(double specialPrice) {
		if (specialOffer){
			this.specialPrice = specialPrice;
		} else {
			throw new RuntimeException("Special offer not set yet!");
		}
	}


	public String getDescription() {
		return description;
	}


	public void setDescription(String description) {
		this.description = description;
	}


	public boolean isSpecialOffer() {
		return specialOffer;
	}


	public void setSpecialOffer(boolean specialOffer) {
		this.specialOffer = specialOffer;
	}


	public HashSet<Ingredient> getIngredients() {
		return (HashSet<Ingredient>) ingredients;
	}




	// Equals and hash
	/**
	 * Check if the name is the same
	 */
	@Override
	public boolean equals(Object o){
		if (o instanceof Meals){
			Meals c1 = (Meals) o; 
			return (c1.getName().equals(this.name));
		}
		return false;
	}
	/**
	 * overridden hashCode method
	 */
	
	@Override
	public int hashCode(){
    	int code = 0;
        for (int i=0; i < this.name.length(); i++){
        	char c = this.name.charAt(i);
        	int h = 41+((int)c+i)*(19+i);
        	code += h;
        }
		return code;
	}
	
}
